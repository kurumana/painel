<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conversor de Descrições</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        textarea {
            width: 100%;
            height: 150px;
            margin-bottom: 10px;
        }
        button {
            margin: 5px 0;
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }
        button:hover {
            background-color: #45a049;
        }
        .output {
            margin-top: 20px;
            padding: 10px;
            border: 1px solid #ccc;
            background-color: #f9f9f9;
        }
        .output p {
            white-space: pre-wrap;
        }
    </style>
</head>
<body>

<h1>Conversor de Descrições</h1>
<p>Insira as descrições abaixo (uma por linha) e clique em "Converter" para gerar as descrições completas e reduzidas:</p>

<textarea id="inputText" placeholder="Digite aqui..."></textarea>
<button onclick="convertText()">Converter</button>

<div class="output">
    <h3>Descrição Completa:</h3>
    <p id="outputComplete"></p>
    <h3>Descrição Reduzida:</h3>
    <p id="outputShort"></p>
    <button onclick="copyToClipboard()">Copiar Resultados</button>
</div>

<script>
    function convertText() {
        const input = document.getElementById('inputText').value;
        const lines = input.split('\n'); // Dividir entrada em linhas

        // Abreviações definidas
        const abbreviations = {
            'comprimido': 'COMP.',
            'ampola': 'AMP.',
            'seringa': 'SER.',
            'solução': 'SOL.',
            'injetável': 'INJ.',
            'revestido': 'REVES.',
            'frasco': 'FR.',
            'frasco ampola': 'FA.'
        };

        let outputComplete = [];
        let outputShort = [];

        // Processar cada linha individualmente
        lines.forEach(line => {
            let complete = line.trim();
            let short = line.trim();

            // Substituir palavras por abreviações
            for (const [key, value] of Object.entries(abbreviations)) {
                const regex = new RegExp('\\b' + key + '\\b', 'gi');
                complete = complete.replace(regex, value);
                short = short.replace(regex, value);
            }

            // Reorganizar descrição completa
            const patternComplete = /^(.*?)\s+(COMP\.|AMP\.|SER\.|SOL\.|INJ\.|REVES\.|FR\.|FA\.)\s+(.*?)$/i;
            complete = complete.replace(patternComplete, (_, nome, forma, detalhes) => {
                return `${nome} ${detalhes} ${forma}`;
            });

            // Reorganizar descrição reduzida: [Nome] [Dosagem] [Forma]
            const patternShort = /^(.*?)\s+([\d\/\.\w]+)\s+(COMP\.|AMP\.|SER\.|SOL\.|INJ\.|REVES\.|FR\.|FA\.)/i;
            short = short.replace(patternShort, (_, nome, dosagem, forma) => {
                return `${nome} ${dosagem} ${forma}`;
            });

            // Adicionar às saídas
            outputComplete.push(complete);
            outputShort.push(short);
        });

        // Atualizar elementos na página
        document.getElementById('outputComplete').innerText = outputComplete.join('\n');
        document.getElementById('outputShort').innerText = outputShort.join('\n');
    }

    function copyToClipboard() {
        const completeText = document.getElementById('outputComplete').innerText;
        const shortText = document.getElementById('outputShort').innerText;
        const combinedText = `Descrição Completa:\n${completeText}\n\nDescrição Reduzida:\n${shortText}`;
        
        navigator.clipboard.writeText(combinedText)
            .then(() => {
                alert('Texto copiado para a área de transferência!');
            })
            .catch(err => {
                alert('Erro ao copiar o texto: ' + err);
            });
    }
</script>

</body>
</html>
